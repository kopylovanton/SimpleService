{
  "swagger": "2.0",
  "basePath": "/template",
  "paths": {
    "/status": {
      "get": {
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/Status_Check"
            }
          }
        },
        "description": "Health checks and status information",
        "operationId": "get_status_api",
        "parameters": [
          {
            "name": "X-Fields",
            "in": "header",
            "type": "string",
            "format": "mask",
            "description": "An optional fields mask"
          }
        ],
        "tags": [
          "template"
        ]
      }
    },
    "/{source_system}/{uid}": {
      "parameters": [
        {
          "description": "Surce system IDT for logging",
          "name": "source_system",
          "in": "path",
          "required": true,
          "type": "string"
        },
        {
          "description": "Unique message idt",
          "name": "uid",
          "in": "path",
          "required": true,
          "type": "string"
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/template"
            }
          },
          "500": {
            "description": "Some problem with DB or SQL"
          }
        },
        "description": "Get active auth transaction list for client's cards by main contract number",
        "operationId": "get_stable_api",
        "parameters": [
          {
            "description": "Main contract number",
            "name": "mainContractNumber",
            "type": "string",
            "in": "query"
          },
          {
            "name": "X-Fields",
            "in": "header",
            "type": "string",
            "format": "mask",
            "description": "An optional fields mask"
          }
        ],
        "tags": [
          "template"
        ]
      }
    }
  },
  "info": {
    "title": "WAY4 CARDS API",
    "version": "2020_01_12",
    "description": "Get active auth transaction list for client's cards by main contract number"
  },
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "tags": [
    {
      "name": "template",
      "description": "Specification"
    }
  ],
  "definitions": {
    "template": {
      "required": [
        "message",
        "rc",
        "source_system",
        "uid"
      ],
      "properties": {
        "rc": {
          "type": "integer",
          "description": "Responce code"
        },
        "message": {
          "type": "string",
          "description": "Responce message"
        },
        "source_system": {
          "type": "string",
          "description": "Surce system IDT for logging"
        },
        "uid": {
          "type": "string",
          "description": "Unique message idt"
        },
        "input_parms": {
          "$ref": "#/definitions/get_input_parms"
        },
        "records": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/get_responce_record"
          }
        }
      },
      "type": "object"
    },
    "get_input_parms": {
      "properties": {
        "mainContractNumber": {
          "type": "string",
          "description": "Main contract number"
        }
      },
      "type": "object"
    },
    "get_responce_record": {
      "properties": {
        "id": {
          "type": "string",
          "description": "way4 unique document number"
        },
        "transactionDate": {
          "type": "string",
          "description": "local transaction date time - yyyymmddHHMiss"
        },
        "transTypeId": {
          "type": "string",
          "description": "trans type unique Id"
        },
        "transType": {
          "type": "string",
          "description": "trans type name"
        },
        "transactionStatus": {
          "type": "string",
          "description": "transaction processing status"
        },
        "transactionAmount": {
          "type": "string",
          "description": "transaction amount"
        },
        "transactionCurrency": {
          "type": "string",
          "description": "transaction currency"
        },
        "amountInAccCurr": {
          "type": "string",
          "description": "transaction amount in account currency"
        },
        "acctCurr": {
          "type": "string",
          "description": "account currency"
        },
        "feeAmount": {
          "type": "string",
          "description": "fee amount"
        },
        "feeCurrency": {
          "type": "string",
          "description": "fee currency"
        },
        "requestCategory": {
          "type": "string",
          "description": "request category (request/advice/reverse)"
        },
        "tokenDeviceType": {
          "type": "string",
          "description": "token acceptance device type Phone/Tablet/Watch"
        },
        "tokenProvider": {
          "type": "string",
          "description": "token provider"
        },
        "sourceChannel": {
          "type": "string",
          "description": "source channel"
        },
        "targetChannel": {
          "type": "string",
          "description": "target channel"
        },
        "addInfo": {
          "type": "string",
          "description": "some tag=value; add info"
        },
        "transactionDescription": {
          "type": "string",
          "description": "transaction description"
        },
        "retrievalRefNumber": {
          "type": "string",
          "description": "retrieval ref number - printed on receipt"
        },
        "authCode": {
          "type": "string",
          "description": "auth code - printed on receipt"
        },
        "transCity": {
          "type": "string",
          "description": "transaction city"
        },
        "transCountry": {
          "type": "string",
          "description": "trans country"
        },
        "mccCategory": {
          "type": "string",
          "description": "mccCategory"
        },
        "transCondAttr": {
          "type": "string",
          "description": "tag; format transaction attributes (chip, attended , etc)"
        },
        "contractFor": {
          "type": "string",
          "description": "card number masked 4***4"
        }
      },
      "type": "object"
    },
    "Status_Check": {
      "required": [
        "db_status",
        "errorsCount",
        "getCount",
        "meanGetDuration",
        "message",
        "rc",
        "up_time_min"
      ],
      "properties": {
        "rc": {
          "type": "integer",
          "description": "Responce code"
        },
        "message": {
          "type": "string",
          "description": "Responce message"
        },
        "db_status": {
          "type": "string",
          "description": "DB connection status UP/DOWN"
        },
        "up_time_min": {
          "type": "string",
          "description": "worker up time in minutes"
        },
        "getCount": {
          "type": "string",
          "description": "Count get request in last 5 minutes"
        },
        "meanGetDuration": {
          "type": "string",
          "description": "Mean durations get request in last 5 minutes"
        },
        "errorsCount": {
          "type": "string",
          "description": "Errors count in last 5 minutes"
        }
      },
      "type": "object"
    }
  },
  "responses": {
    "ParseError": {
      "description": "When a mask can't be parsed"
    },
    "MaskError": {
      "description": "When any error occurs on mask"
    }
  }
}